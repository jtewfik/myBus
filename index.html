<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
    
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Mybus : Pebble watchface and watchapp for displaying translink data" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>My Bus Configuration</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <h4 id="project_title">My Bus Configuration</h4>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <form id="config-form" class="inner" action="#" method="POST">
         <div class="form-group" style="padding-right:20px">
          <label for="stopNum" style="font-size:20; font-weight:bold; padding-right:30px">Stop Number:</label>
          <input type="text" id="stopNum" name="stopNum" class="form-control" placeholder="51082" style="height:25px"/>
        </div>
        <div class="form-group" style="padding-top:20px; padding-right:20px">
          <label for="routeNum" style="font-size:20; font-weight:bold; padding-right:30px">Route Number:</label>
          <input type="text" id="routeNum" name="routeNum" class="form-control" placeholder="003" style="height:25px"/>
        </div>
        <div class="form-group" style="padding-right:20px">
          <button type="submit" data-theme="a" id="b-submit">Save Changes</button>
        </div>
      </form>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">My Bus maintained by <a href="https://github.com/jtewfik">jtewfik</a></p>
      </footer>
    </div>

    <script type="text/javascript">
      $().ready(function () {

        $("#stopNum").val(localStorage.getItem("stop_num_list"));
        $("#routeNum").val(localStorage.getItem("route_list"));

        $("#config-form").submit(function(e) {
          console.log("TESTING SUBMIT");
          var stop = $("#stopNum").val();
          var route = $("#routeNum").val();

          var configObj = { "stop_num": stop,
                            "route_num": route
                          };

          localStorage.setItem("stop_num_list", stop);
          localStorage.setItem("route_list", route);

          document.location = "pebblejs://close#" + JSON.stringify(configObj);
          e.preventDefault();

        });
      }); 
      </script>

  </body>
</html>
